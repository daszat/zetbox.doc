Using the ZetBox
================

This chapter describes common tasks and how to use the ZetBox.

Creating the UI from meta data
------------------------------

### Properties

The default order of properties is defined by

* The order within the data type
* Inheritance: derived class first

Properties are grouped by their summary tags. Tags are separated by a comma ','. A underline '_' will be translated in a space. The order of tags is defined:

1. Summary
2. Main
3. all other
4. Meta

The tag "Hidden" is only visible to Administrators. The Tag "Main", if not available "Summary", is selected first when the object has been opened.

Tags can be translated. The translated tag is only used in the title of a property group. Thus tags should be entered in English. 

**Example:**
[[!img EditFixedYearlyRule.png class="medium"]]
[[!img ClassFixedYearlyRule.png class="medium"]]
[[!img ClassYearlyRule.png class="medium"]]
[[!img ClassWorkScheduleRule.png class="medium"]]

### Methods
Methods are not visible by default. The property "IsDisplayable" controls this.

[[!img AppliesTo_Main.png class="medium"]]

A Method can also have category tags. Methods will be grouped in a Menu. See Properties for details.

"Show by Properties" is a way to display a Method in the Toolbar of a list property. Note: The selected item is not passed to the method.

[[!img MethodTest-ObjParameter.png class="medium"]]
[[!img MethodTest.png class="medium"]]

Using custom ViewModels and Views for the UI
--------------------------------------------

TODO: 

Custom code
-----------

### Action classes

### Methods

### Getter/Setter

Dialogs
-------

Sometimes it is necessary to show a Dialog. For example to select
something or to edit some details.

Usage is simple, just create a *SimpleDataObjectEditorTaskViewModel*,
pass the ViewModel (can be any view model) to edit and call
*ShowDialog*.

[[!format cs """
var dlg = ViewModelFactory
    .CreateViewModel<SimpleDataObjectEditorTaskViewModel.Factory>()
    .Invoke(DataContext, this, item);
ViewModelFactory.ShowDialog(dlg);
"""]]

If the user should chose from a list, the *DataObjectSelectionTaskViewModel* can be used:

[[!format cs """
var selectionTask = ViewModelFactory
	.CreateViewModel<DataObjectSelectionTaskViewModel.Factory>()
	.Invoke(
		DataContext,
		this,
		typeof(Projekt).GetObjectClass(FrozenContext),
		null,
		(objs) =>
		{
			if (objs != null)
			{
				var prj = (Projekt)objs.First().Object;
				...
			}
		},
		null);
selectionTask.ListViewModel.AllowDelete = false;
selectionTask.ListViewModel.AllowOpen = false;
selectionTask.ListViewModel.AllowAddNew = true;
ViewModelFactory.ShowDialog(selectionTask);
"""]]